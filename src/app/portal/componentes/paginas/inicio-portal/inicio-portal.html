<div class="container-fluid zenith-container">

  <header class="zenith-header">
    <h1>Tu Resumen de Bienestar</h1>
    <p>Hola {{ nombreUsuario() }}, bienvenido a tu centro de control personal.</p>
  </header>

  <div class="zenith-grid">

    <div class="grid-item ascenso-card">
      <h2 class="section-title">Tu Ascenso de Hoy</h2>
      <div class="ascenso-grid">
        <div class="progreso-container">
          <svg viewBox="0 0 36 36" class="progreso-circular">
            <path class="circle-bg" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
            <path class="circle" [style.stroke-dasharray]="progresoActividades() + ', 100'" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
            <text x="18" y="20.35" class="progreso-texto">{{ progresoActividades() }}%</text>
          </svg>
          <p>Progreso Diario</p>
        </div>
        <ul class="actividades-lista">
          <li *ngFor="let actividad of actividadesDiarias()" (click)="toggleActividad(actividad.id)" [class.completado]="actividad.completado">
            <mat-icon class="check-icon">{{ actividad.completado ? 'check_circle' : 'radio_button_unchecked' }}</mat-icon>
            <div class="actividad-icon"><mat-icon>{{ actividad.icono }}</mat-icon></div>
            <span>{{ actividad.descripcion }}</span>
          </li>
        </ul>
      </div>
    </div>

    <div class="grid-item campamento-card">
      <h2 class="section-title">Próximo Campamento Base</h2>
      <ng-container *ngIf="proximaCita() as cita; else noCitasCampamento">
        <div class="campamento-content">
          <div class="campamento-fecha">
            <span class="dia">{{ cita.fechaHora | date:'d' }}</span>
            <span class="mes">{{ cita.fechaHora | date:'MMM' | uppercase }}</span>
          </div>
          <div class="campamento-info">
            <h3>{{ cita.medico.especialidad }}</h3>
            <p>con Dr(a). {{ cita.medico.nombres }} {{ cita.medico.apellidos }}</p>
          </div>
          <a mat-icon-button class="campamento-action" routerLink="/portal/mis-citas" matTooltip="Ver detalles">
            <mat-icon>arrow_forward</mat-icon>
          </a>
        </div>
      </ng-container>
      <ng-template #noCitasCampamento>
        <div class="no-content-placeholder">
          <mat-icon>landscape</mat-icon>
          <h3>El horizonte está despejado</h3>
          <p>No tienes citas próximas. ¡Disfruta el camino!</p>
        </div>
      </ng-template>
    </div>

    <div class="grid-item clima-salud-card">
      <div class="clima-widget">
        <mat-icon class="clima-icon accent">science</mat-icon>
        <span class="clima-valor">{{ resultadosPendientes() }}</span>
        <span class="clima-label">Resultados</span>
      </div>
      <div class="clima-widget">
        <mat-icon class="clima-icon warn">receipt_long</mat-icon>
        <span class="clima-valor">{{ recetasActivas() }}</span>
        <span class="clima-label">Recetas</span>
      </div>
      <div class="clima-widget">
        <mat-icon class="clima-icon primary">forum</mat-icon>
        <span class="clima-valor">{{ mensajesNoLeidos() }}</span>
        <span class="clima-label">Mensajes</span>
      </div>
    </div>

    <div class="grid-item guia-experto-card" *ngIf="consejoDelDia() as consejo">
      <div class="guia-header">
        <div class="guia-icon"><mat-icon>{{ consejo.icono }}</mat-icon></div>
        <h2 class="section-title">{{ consejo.titulo }}</h2>
      </div>
      <p class="guia-contenido">{{ consejo.contenido }}</p>
    </div>

    <div class="grid-item quick-access-card">
      <h2 class="section-title">Accesos Rápidos</h2>
      <div class="quick-access-buttons">
        <a mat-stroked-button routerLink="/portal/agendar-cita" class="quick-access-button">
          <mat-icon>event</mat-icon>
          <span>Agendar Cita</span>
        </a>
        <a mat-stroked-button routerLink="/portal/mi-historial" class="quick-access-button">
          <mat-icon>history_edu</mat-icon>
          <span>Ver Mi Historial</span>
        </a>
        <a mat-stroked-button routerLink="/portal/mi-perfil" class="quick-access-button">
          <mat-icon>account_circle</mat-icon>
          <span>Actualizar Mi Perfil</span>
        </a>
        <a mat-stroked-button routerLink="/portal/nuestros-medicos" class="quick-access-button">
          <mat-icon>groups</mat-icon>
          <span>Buscar Médicos</span>
        </a>
      </div>
    </div>

  </div>
</div>